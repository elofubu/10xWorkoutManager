@page "/authentication/reset-password"
@layout EmptyLayout
@using System.ComponentModel.DataAnnotations

<MudGrid Justify="Justify.Center" Class="mt-16">
    <MudItem xs="12" sm="8" md="4">
        <MudCard>
            <MudCardHeader>
                <CardHeaderContent>
                    <div class="text-center mb-2">
                        <MudText Typo="Typo.h4" Class="my-2" Color="Color.Primary">Welcome Back</MudText>
                    </div>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent>
                @if (!string.IsNullOrEmpty(_message))
                {
                    <MudAlert Severity="@_messageSeverity" Class="mb-4">@_message</MudAlert>
                }
                <MudForm @ref="_form" @bind-IsValid="@_success" @bind-IsValid:after="StateHasChanged">
                    <MudTextField @bind-Value="_model.Email"
                                  Label="Email Address"
                                  Variant="Variant.Outlined"
                                  InputType="InputType.Email"
                                  Adornment="Adornment.Start"
                                  AdornmentIcon="@Icons.Material.Filled.Email"
                                  RequiredError="Email is required!"
                                  Class="mb-4"
                                  Required="true" 
                                  Validation="@(new EmailAddressAttribute() { ErrorMessage = "The email address is not valid." })" />
                </MudForm>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Disabled="@(!_success || _isSubmitting)" OnClick="Submit" Class="ml-auto">
                    @if (_isSubmitting)
                    {
                        <MudProgressCircular Indeterminate="true" Size="Size.Small" />
                    }
                    else
                    {
                        <span>Send Reset Link</span>
                    }
                </MudButton>
            </MudCardActions>
        </MudCard>
        <MudText Align="Align.Center" Class="mt-4">
            Remember your password? <MudLink Href="/authentication/login">Login</MudLink>
        </MudText>
    </MudItem>
</MudGrid>

@if (_isLoading)
{
    <MudOverlay Visible="true" DarkBackground="true" ZIndex="9999">
        <MudProgressCircular Color="Color.Default" Indeterminate="true" />
    </MudOverlay>
}

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">Create Exercise</MudText>
    </TitleContent>
    <DialogContent>
        <MudForm @bind-IsValid="@_success">
            <MudTextField T="string"
                          @bind-Value="_model.Name"
                          Variant="Variant.Outlined"
                          Margin="Margin.Dense"
                          Label="Name"
                          Required="true"
                          RequiredError="Name is required!"
                          Disabled="@_isSubmitting" />

            <MudSelect T="long"
                       @bind-Value="_model.MuscleGroupId"
                       Variant="Variant.Outlined"
                       Margin="Margin.Dense"
                       Label="Muscle Group"
                       Placeholder="Select muscle group"
                       Required="true"
                       RequiredError="Please select a muscle group"
                       Disabled="@_isSubmitting">

                <MudSelectItem Value="0L" Disabled="true">Select muscle group</MudSelectItem>

                @foreach (var group in _muscleGroups)
                {
                    <MudSelectItem Value="@group.Id">@group.Name</MudSelectItem>
                }
            </MudSelect>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" Disabled="@_isSubmitting">Cancel</MudButton>
        <MudButton Color="Color.Primary"
                   Variant="Variant.Filled"
                   Disabled="@(!_success || _isSubmitting)"
                   OnClick="Submit">
            @if (_isSubmitting)
            {
                <MudProgressCircular Size="Size.Small" Indeterminate="true" Class="mr-2" />
            }
            Create
        </MudButton>
    </DialogActions>
</MudDialog>
